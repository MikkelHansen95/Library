/* FIND HOW MANY AVAILABLE */
SELECT COUNT(*) FROM BOOKINSTANCE WHERE ISBN = 9788782031232 and available = true;

/* SEARCH BY DATE TO FIND MOST POPULAR TITLE AMONG STUDENTS */
SELECT book.title, COUNT(book.title) as popular FROM loans
INNER JOIN bookinstance ON loans.instanceid = bookinstance.id
INNER JOIN book ON bookinstance.isbn = book.isbn
INNER JOIN client ON loans.clientid = client.id
INNER JOIN clienttype ON client.type = clienttype.id
WHERE clienttype.name = 'Student'
AND loans.startDate >= '2020-02-25'
AND loans.endDate <= '2020-02-26'
GROUP BY 1
ORDER BY popular DESC LIMIT 1;